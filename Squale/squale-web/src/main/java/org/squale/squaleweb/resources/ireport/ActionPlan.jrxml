<?xml version="1.0" encoding="UTF-8"  ?>
<!-- Created with iReport - A designer for JasperReports -->
<!-- Modified manually -->
<!-- Refer to http://jasperreports.sourceforge.net/schema.reference.html for more informations -->

<!DOCTYPE jasperReport PUBLIC "//JasperReports//DTD Report Design//EN" "http://jasperreports.sourceforge.net/dtds/jasperreport.dtd">

<!-- ##### Global configuration regarding the report ##### -->
<!-- Root element representing the definition of a report. -->
<jasperReport name="ActionPlan" columnCount="1" printOrder="Vertical"
	orientation="Portrait" pageWidth="595" pageHeight="842"
	columnWidth="535" columnSpacing="0" leftMargin="30" rightMargin="30"
	topMargin="20" bottomMargin="20" whenNoDataType="NoPages"
	isTitleNewPage="false" isSummaryNewPage="false">

	<!-- ##### iReport specific properties ##### -->
	<property name="ireport.scriptlethandling" value="0" />
	<property name="ireport.encoding" value="UTF-8" />

	<!-- ############################## Import declaration ######################### -->
	<!-- Translates into an import statement inside the expression class order		 -->
	<!-- to eliminate the need to use complete class names in the report expressions.-->
	<import value="java.util.*" />
	<import value="net.sf.jasperreports.engine.*" />
	<import value="net.sf.jasperreports.engine.data.*" />
	<import
		value="org.squale.squalecommon.datatransfertobject.rule.PracticeRuleDTO" />
	<import value="org.squale.squaleweb.resources.WebMessages" />
	<import value="org.squale.squaleweb.util.JasperReportUtil" />
	<import value="org.squale.squaleweb.util.SqualeWebActionUtils" />

	<!-- ########################### Parameters used whithin the report ############################## -->
	<!-- Represents the definition of a report parameter. Parameters are very useful for passing data  -->
	<!-- to the report engine and can be used in the expressions or in the query string of the report. -->
	<parameter name="ResultsIterator" isForPrompting="false"
		class="java.lang.Object">
		<parameterDescription><![CDATA[les rÃ©sultats]]></parameterDescription>
	</parameter>
	<parameter name="userName" isForPrompting="false"
		class="java.lang.String">
		<defaultValueExpression><![CDATA["?"]]></defaultValueExpression>
	</parameter>
	<parameter name="volumetry" isForPrompting="false"
		class="java.util.List" />
	<parameter name="factors" isForPrompting="false"
		class="java.util.Collection" />
	<parameter name="previousAuditDate" isForPrompting="false"
		class="java.lang.String" />
	<parameter name="auditDate" isForPrompting="false"
		class="java.lang.String">
		<parameterDescription><![CDATA[la date ou le nom de l'audit courant]]></parameterDescription>
	</parameter>

	<!-- ################### Field declarations ################### -->
	<!-- Represents the definition of a data field that will store	-->
	<!-- values retrieved from the data source of the report.		-->
	<field name="nbCorrections" class="java.lang.Integer" />
	<field name="qualityResultDTO"
		class="org.squale.squalecommon.datatransfertobject.result.QualityResultDTO" />
	<field name="resultsDTO"
		class="org.squale.squalecommon.datatransfertobject.result.ResultsDTO" />
	<field name="transgressions" class="java.util.Collection" />

	<!-- ###################################### Variables declarations #######################################  -->
	<!-- Represents the definition of a report variable. Variables are objects that store the values of their	-->
	<!-- associated expressions or perform various calculations on those expression values. Expressions are java-->
	<!-- expressions build on top of fields and variables declared in the report. They are evaluated at runtime,-->
	<!-- when filling the report. -->
	<variable name="date" class="java.lang.String" resetType="Report"
		calculation="Nothing">
		<variableExpression><![CDATA[org.squale.squaleweb.util.SqualeWebActionUtils.getFormattedDate(new Date(), $P{REPORT_RESOURCE_BUNDLE}.getLocale())]]></variableExpression>
		<initialValueExpression><![CDATA[org.squale.squaleweb.util.SqualeWebActionUtils.getFormattedDate(new Date(), $P{REPORT_RESOURCE_BUNDLE}.getLocale())]]></initialValueExpression>
	</variable>
	<variable name="nbSquale" class="java.lang.Integer"
		resetType="Report" calculation="Nothing">
		<variableExpression><![CDATA[new Integer((int)(Math.log(((org.squale.squalecommon.datatransfertobject.rule.PracticeRuleDTO)$F{qualityResultDTO}.getRule()).getEffort())/Math.log(10)+1))]]></variableExpression>
	</variable>
	<variable name="currentValue" class="java.lang.Object"
		resetType="None" incrementType="Report" calculation="Nothing">
		<variableExpression><![CDATA[(((Iterator)$P{ResultsIterator}).hasNext())?((Iterator)$P{ResultsIterator}).next():null]]></variableExpression>
	</variable>
	<!-- Used to create a group containing the volumetry -->
	<group name="Volumetry" isStartNewPage="true">
		<!-- ########### GroupExpression ######### -->
		<!-- Specifies the expression that will be -->
		<!-- evaluated at runtime to determine the -->
		<!-- group ruptures. -->
		<groupExpression><![CDATA[$P{volumetry}]]></groupExpression>
		<groupHeader>
			<band height="120">
				<!-- ####### TextField declaration ###### -->
				<!-- Title of the volumetry table -->
				<textField isStretchWithOverflow="true" pattern=""
					isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"
					hyperlinkTarget="Self">
					<reportElement mode="Transparent" x="0" y="-42"
						width="299" height="5" forecolor="#000000" backcolor="#FFFFFF"
						key="textField-16" positionType="Float">
						<printWhenExpression><![CDATA[new Boolean($P{volumetry}!=null)]]></printWhenExpression>
					</reportElement>
					<box topBorder="None" topBorderColor="#000000"
						topPadding="40" leftBorder="None" leftBorderColor="#000000"
						rightBorder="None" rightBorderColor="#000000" bottomBorder="None"
						bottomBorderColor="#000000" />
					<textElement textAlignment="Justified"
						verticalAlignment="Middle" rotation="None" lineSpacing="Single">
						<font fontName="Arial"
							pdfFontName="Helvetica-Bold" size="14" isBold="true"
							isItalic="false" isUnderline="false" isPdfEmbedded="false"
							pdfEncoding="Cp1252" isStrikeThrough="false" />
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA[$R{project.results.volumetry.tab}]]></textFieldExpression>
				</textField>
				<!-- ######### SubReport declaration ####### -->
				<!-- jasperreport/ProjectVolumetrySub.jasper -->
				<subreport isUsingCache="true">
					<reportElement mode="Transparent" x="0" y="-35"
						width="400" height="12" forecolor="#000000" backcolor="#FFFFFF"
						key="subreport-3" positionType="Float">
						<printWhenExpression><![CDATA[new Boolean($P{volumetry}!=null)]]></printWhenExpression>
					</reportElement>
					<subreportParameter name="REPORT_RESOURCE_BUNDLE">
						<subreportParameterExpression><![CDATA[$P{REPORT_RESOURCE_BUNDLE}]]></subreportParameterExpression>
					</subreportParameter>
					<dataSourceExpression><![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($P{volumetry})]]></dataSourceExpression>
					<subreportExpression class="java.lang.String"><![CDATA["/org/squale/squaleweb/resources/jasperreport/ProjectVolumetrySub.jasper"]]></subreportExpression>
				</subreport>
				<!-- ####### TextField declaration ###### -->
				<!-- Title of the factor table -->
				<textField isStretchWithOverflow="true" pattern=""
					isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"
					hyperlinkTarget="Self">
					<reportElement mode="Transparent" x="0" y="-19"
						width="299" height="4" forecolor="#000000" backcolor="#FFFFFF"
						key="textField-17" positionType="Float">
						<printWhenExpression><![CDATA[new Boolean($P{factors}!=null)]]></printWhenExpression>
					</reportElement>
					<!-- 	Definition of an image object. -->
					<box topBorder="None" topBorderColor="#000000"
						topPadding="80" leftBorder="None" leftBorderColor="#000000"
						rightBorder="None" rightBorderColor="#000000" bottomBorder="None"
						bottomBorderColor="#000000" />
					<!-- ###### Customisation of the textElement ######-->
					<!-- Element used to specify the common properties -->
					<!-- of a text object on the report  -->
					<textElement textAlignment="Justified"
						verticalAlignment="Middle" rotation="None" lineSpacing="Single">
						<font fontName="Arial"
							pdfFontName="Helvetica-Bold" size="14" isBold="true"
							isItalic="false" isUnderline="false" isPdfEmbedded="false"
							pdfEncoding="Cp1252" isStrikeThrough="false" />
					</textElement>
					<!-- Defines the expression to use for this textField. -->
					<textFieldExpression class="java.lang.String"><![CDATA[$R{project.results.factors.tab}]]></textFieldExpression>
				</textField>
				<!-- ####### SubReport declaration ###### -->
				<!-- jasperreport/factorsResult.jasper 	  -->
				<subreport isUsingCache="true">
					<reportElement mode="Opaque" x="0" y="-11"
						width="499" height="7" forecolor="#000000" backcolor="#FFFFFF"
						key="subreport-4" positionType="Float">
						<printWhenExpression><![CDATA[new Boolean($P{factors}!=null)]]></printWhenExpression>
					</reportElement>
					<subreportParameter name="REPORT_RESOURCE_BUNDLE">
						<subreportParameterExpression><![CDATA[$P{REPORT_RESOURCE_BUNDLE}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="REPORT_LOCALE">
						<subreportParameterExpression><![CDATA[$P{REPORT_LOCALE}]]></subreportParameterExpression>
					</subreportParameter>
					<dataSourceExpression><![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($P{factors})]]></dataSourceExpression>
					<subreportExpression class="java.lang.String"><![CDATA["/org/squale/squaleweb/resources/jasperreport/factorsResult.jasper"]]></subreportExpression>
				</subreport>
			</band>
		</groupHeader>
		<groupFooter>
			<band />
		</groupFooter>
	</group>
	<!-- Used to create a group containing all the factors -->
	<group name="Factors" isStartNewPage="true"
		minHeightToStartNewPage="20">
		<!-- ########### GroupExpression ######### -->
		<!-- Specifies the expression that will be -->
		<!-- evaluated at runtime to determine the -->
		<!-- group ruptures. -->
		<groupExpression><![CDATA[$P{factors}]]></groupExpression>
		<groupHeader>
			<band height="20" />
		</groupHeader>
		<groupFooter>
			<band height="20" />
		</groupFooter>
	</group>
	<!-- ###################################### Background declaration ######################################### -->
	<!-- Definition of the page background section for this report. The background section is displayed on every -->
	<!-- page and cannot overflow to the next page. Elements placed on this section are evaluated at page 		 -->
	<!-- initialization time and are displayed in the back. All other page elements are displayed on top of the  -->
	<!-- background elements. This section allows creating watermark or other similar effects in documents.		 -->
	<background>
		<band height="0" isSplitAllowed="true"></band>
	</background>

	<!-- #################### Title declaration ################### -->
	<!-- Definition of the title section for this report. The title -->
	<!-- section appears only once at the beginning of the report.  -->
	<title>
		<!-- ########### Band declaration ########## -->
		<!-- Generic definition of a report section. -->
		<band height="136" isSplitAllowed="false">
			<!-- The top rectangle which surrounds the top title -->
			<rectangle radius="0">
				<reportElement mode="Opaque" x="0" y="0" width="535"
					height="50" forecolor="#000000" backcolor="#FFFFFF"
					key="rectangle-1" stretchType="RelativeToTallestObject" />
				<graphicElement stretchType="RelativeToTallestObject"
					pen="Thin" fill="Solid" />
			</rectangle>
			<!-- ####### Image declaration ###### -->
			<!-- The Squale logo on the left side -->
			<image scaleImage="FillFrame" vAlign="Middle"
				hAlign="Center" isUsingCache="false" evaluationTime="Now"
				hyperlinkType="None" hyperlinkTarget="Self">
				<reportElement mode="Opaque" x="7" y="4" width="100"
					height="39" forecolor="#000000" backcolor="#FFFFFF" key="image-1" />
				<box topBorder="None" topBorderColor="#000000"
					leftBorder="None" leftBorderColor="#000000" rightBorder="None"
					rightBorderColor="#000000" bottomBorder="None"
					bottomBorderColor="#000000" />
				<graphicElement stretchType="NoStretch" pen="None"
					fill="Solid" />
				<imageExpression class="java.lang.String"><![CDATA["/org/squale/squaleweb/resources/jasperreport/images/logoSquale.gif"]]></imageExpression>
			</image>
			<!-- ####### Textfield declaration ###### -->
			<textField isStretchWithOverflow="true" pattern=""
				isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"
				hyperlinkTarget="Self">
				<reportElement mode="Transparent" x="0" y="60"
					width="255" height="21" forecolor="#000000" backcolor="#FFFFFF"
					key="textField-1" positionType="Float">
					<printWhenExpression><![CDATA[new Boolean($P{factors}==null)]]></printWhenExpression>
				</reportElement>
				<box topBorder="None" topBorderColor="#000000"
					leftBorder="None" leftBorderColor="#000000" rightBorder="None"
					rightBorderColor="#000000" bottomBorder="None"
					bottomBorderColor="#000000" />
				<textElement textAlignment="Justified"
					verticalAlignment="Middle" rotation="None" lineSpacing="Single">
					<font fontName="Verdana" pdfFontName="Helvetica"
						size="12" isBold="true" isItalic="false" isUnderline="false"
						isPdfEmbedded="false" pdfEncoding="Cp1252"
						isStrikeThrough="false" />
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[msg($R{description.name.audit}, $P{auditDate})]]></textFieldExpression>
			</textField>
			<!-- ####### Textfield declaration ###### -->
			<textField isStretchWithOverflow="true" pattern=""
				isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"
				hyperlinkTarget="Self">
				<reportElement mode="Transparent" x="0" y="56"
					width="534" height="38" forecolor="#000000" backcolor="#FFFFFF"
					key="textField-19" positionType="Float">
					<printWhenExpression><![CDATA[new Boolean($P{factors}!=null)]]></printWhenExpression>
				</reportElement>
				<box topBorder="None" topBorderColor="#000000"
					leftBorder="None" leftBorderColor="#000000" rightBorder="None"
					rightBorderColor="#000000" bottomBorder="None"
					bottomBorderColor="#000000" />
				<textElement textAlignment="Justified"
					verticalAlignment="Middle" rotation="None" lineSpacing="Single">
					<font fontName="Verdana"
						pdfFontName="Helvetica-Bold" size="12" isBold="true"
						isItalic="false" isUnderline="false" isPdfEmbedded="false"
						pdfEncoding="Cp1252" isStrikeThrough="false" />
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[msg($R{description.name.audit}, $P{auditDate}) + "\n"
+ msg($R{evolution.components.previous_audit}, $P{previousAuditDate})]]></textFieldExpression>
			</textField>
			<!-- ####### Textfield declaration ###### -->
			<textField isStretchWithOverflow="true" pattern=""
				isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"
				hyperlinkTarget="Self">
				<reportElement mode="Transparent" x="106" y="5"
					width="429" height="37" forecolor="#000000" backcolor="#FFFFFF"
					key="textField-6" positionType="Float">
					<printWhenExpression><![CDATA[new Boolean($P{factors}!=null)]]></printWhenExpression>
				</reportElement>
				<box topBorder="None" topBorderColor="#000000"
					leftBorder="None" leftBorderColor="#000000" rightBorder="None"
					rightBorderColor="#000000" bottomBorder="None"
					bottomBorderColor="#000000" />
				<textElement textAlignment="Center"
					verticalAlignment="Middle" rotation="None" lineSpacing="Single">
					<font fontName="Arial" pdfFontName="Helvetica"
						size="24" isBold="false" isItalic="false" isUnderline="false"
						isPdfEmbedded="false" pdfEncoding="Cp1252"
						isStrikeThrough="false" />
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[msg($R{export.pdf.action.plan}, $F{qualityResultDTO}.getProject().getName())]]></textFieldExpression>
			</textField>
			<!-- ####### Textfield declaration ###### -->
			<textField isStretchWithOverflow="true" pattern=""
				isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"
				hyperlinkTarget="Self">
				<reportElement mode="Transparent" x="106" y="5"
					width="429" height="37" forecolor="#000000" backcolor="#FFFFFF"
					key="textField-21" positionType="Float">
					<printWhenExpression><![CDATA[new Boolean($P{factors}==null)]]></printWhenExpression>
				</reportElement>
				<box topBorder="None" topBorderColor="#000000"
					leftBorder="None" leftBorderColor="#000000" rightBorder="None"
					rightBorderColor="#000000" bottomBorder="None"
					bottomBorderColor="#000000" />
				<textElement textAlignment="Center"
					verticalAlignment="Middle" rotation="None" lineSpacing="Single">
					<font fontName="Arial" pdfFontName="Helvetica"
						size="24" isBold="false" isItalic="false" isUnderline="false"
						isPdfEmbedded="false" pdfEncoding="Cp1252"
						isStrikeThrough="false" />
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[msg($R{export.pdf.detailed.action.plan}, $F{qualityResultDTO}.getProject().getName())]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<!-- ######################### PageHeader declaration ##################### -->
	<!-- Definition of the page header section for this report. The page header -->
	<!-- is printed at the beginning of each page on the report. 				-->
	<pageHeader>
		<band height="0" isSplitAllowed="true"></band>
	</pageHeader>
	<!-- ################################# ColumnHeader declaration ############################# -->
	<!-- Definition of the column header section for this report. The column header is printed	  -->
	<!-- at the beginning of each column on the report. If the report's column count is 1, column -->
	<!-- header and footer sections are ignored. 												  -->
	<columnHeader>
		<band height="0" isSplitAllowed="true"></band>
	</columnHeader>
	<!-- ################################# Detail declaration ############################# -->
	<!-- Definition of a detail band for this report. A detail band is repeated for each	-->
	<!-- line of data supplied by the report's data source. There can be multiple detail	-->
	<!-- bands in a report. -->
	<detail>
		<band height="271" isSplitAllowed="true">
			<!-- ####### Textfield declaration ###### -->
			<!-- Name of the factor -->
			<textField isStretchWithOverflow="true" pattern=""
				isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"
				hyperlinkTarget="Self">
				<reportElement mode="Opaque" x="0" y="0" width="535"
					height="40" forecolor="#333333" backcolor="#FFFFFF"
					key="textField-2" positionType="Float" />
				<box topBorder="None" topBorderColor="#000000"
					leftBorder="None" leftBorderColor="#000000" leftPadding="5"
					rightBorder="None" rightBorderColor="#000000" bottomBorder="None"
					bottomBorderColor="#000000" />
				<textElement textAlignment="Justified"
					verticalAlignment="Middle" rotation="None" lineSpacing="Single">
					<font fontName="Arial" pdfFontName="Helvetica-Bold"
						size="14" isBold="true" isItalic="false" isUnderline="false"
						isPdfEmbedded="false" pdfEncoding="Cp1252"
						isStrikeThrough="false" />
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$V{REPORT_COUNT}
+ ". "
+ org.squale.squaleweb.resources.WebMessages.getString($P{REPORT_RESOURCE_BUNDLE}.getLocale(), "practice") 
+ " "
+ org.squale.squaleweb.resources.WebMessages.getString($P{REPORT_RESOURCE_BUNDLE}.getLocale(), $F{qualityResultDTO}.getRule().getName())]]></textFieldExpression>
			</textField>
			<!-- ##### SubReport declaration ##### -->
			<!-- Definition of a subreport object. -->
			<subreport isUsingCache="true">
				<reportElement mode="Opaque" x="0" y="185" width="535"
					height="59" forecolor="#000000" backcolor="#FFFFFF"
					key="subreport-1" positionType="Float">
					<printWhenExpression><![CDATA[new Boolean($F{resultsDTO}!=null)]]></printWhenExpression>
				</reportElement>
				<subreportParameter name="REPORT_RESOURCE_BUNDLE">
					<subreportParameterExpression><![CDATA[$P{REPORT_RESOURCE_BUNDLE}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="REPORT_LOCALE">
					<subreportParameterExpression><![CDATA[$P{REPORT_LOCALE}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="resultsMap">
					<subreportParameterExpression><![CDATA[$F{resultsDTO}.getResultMap()]]></subreportParameterExpression>
				</subreportParameter>
				<dataSourceExpression><![CDATA[($F{resultsDTO}!=null)?new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource(new LinkedList($F{resultsDTO}.getResultMap().keySet())):new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource(new ArrayList())]]></dataSourceExpression>
				<subreportExpression class="java.lang.String"><![CDATA["/org/squale/squaleweb/resources/jasperreport/ComponentMarks.jasper"]]></subreportExpression>
			</subreport>
			<!-- ##### SubReport declaration ##### -->
			<!-- Definition of a subreport object. -->
			<subreport isUsingCache="true">
				<reportElement mode="Opaque" x="0" y="185" width="535"
					height="59" forecolor="#000000" backcolor="#FFFFFF"
					key="subreport-2" positionType="Float">
					<printWhenExpression><![CDATA[new Boolean($F{transgressions}!=null)]]></printWhenExpression>
				</reportElement>
				<subreportParameter name="REPORT_RESOURCE_BUNDLE">
					<subreportParameterExpression><![CDATA[$P{REPORT_RESOURCE_BUNDLE}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="REPORT_LOCALE">
					<subreportParameterExpression><![CDATA[$P{REPORT_LOCALE}]]></subreportParameterExpression>
				</subreportParameter>
				<dataSourceExpression><![CDATA[($F{transgressions}!=null)?new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($F{transgressions}):new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource(new ArrayList())]]></dataSourceExpression>
				<subreportExpression class="java.lang.String"><![CDATA["/org/squale/squaleweb/resources/jasperreport/RuleCheckingItem.jasper"]]></subreportExpression>
			</subreport>
			<!-- ####### Textfield declaration ###### -->
			<textField isStretchWithOverflow="true" pattern=""
				isBlankWhenNull="true" evaluationTime="Now" hyperlinkType="None"
				hyperlinkTarget="Self">
				<reportElement mode="Transparent" x="1" y="41"
					width="534" height="38" forecolor="#000000" backcolor="#FFFFFF"
					key="textField-11" positionType="Float" />
				<box topBorder="None" topBorderColor="#000000"
					leftBorder="None" leftBorderColor="#000000" rightBorder="None"
					rightBorderColor="#000000" bottomBorder="None"
					bottomBorderColor="#000000" />
				<textElement textAlignment="Justified"
					verticalAlignment="Top" rotation="None" lineSpacing="1_1_2">
					<font fontName="Arial" pdfFontName="Helvetica"
						size="10" isBold="false" isItalic="false" isUnderline="false"
						isPdfEmbedded="false" pdfEncoding="Cp1252"
						isStrikeThrough="false" />
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[($F{qualityResultDTO}.getRule().getHelpKey() != null && !$F{qualityResultDTO}.getRule().getHelpKey().equals(""))?JasperReportUtil.formatHTML(WebMessages.getString($P{REPORT_RESOURCE_BUNDLE}.getLocale(), $F{qualityResultDTO}.getRule().getHelpKey() + ".description")): ""]]></textFieldExpression>
			</textField>
			<!-- ####### Textfield declaration ###### -->
			<textField isStretchWithOverflow="true" pattern=""
				isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"
				hyperlinkTarget="Self">
				<reportElement mode="Transparent" x="0" y="94"
					width="64" height="14" forecolor="#000000" backcolor="#FFFFFF"
					key="textField-12" positionType="Float" />
				<box topBorder="None" topBorderColor="#000000"
					leftBorder="None" leftBorderColor="#000000" rightBorder="None"
					rightBorderColor="#000000" bottomBorder="None"
					bottomBorderColor="#000000" />
				<textElement textAlignment="Justified"
					verticalAlignment="Middle" rotation="None" lineSpacing="Single">
					<font fontName="Arial" pdfFontName="Helvetica-Bold"
						size="12" isBold="true" isItalic="false" isUnderline="false"
						isPdfEmbedded="false" pdfEncoding="Cp1252"
						isStrikeThrough="false" />
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[org.squale.squaleweb.resources.WebMessages.getString($P{REPORT_RESOURCE_BUNDLE}.getLocale(), "export.pdf.mark") + " : " 
+ SqualeWebActionUtils.formatFloat(""+$F{qualityResultDTO}.getMeanMark())]]></textFieldExpression>
			</textField>
			<!-- ####### Textfield declaration ###### -->
			<textField isStretchWithOverflow="false" pattern=""
				isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"
				hyperlinkTarget="Self">
				<reportElement mode="Transparent" x="0" y="118"
					width="535" height="16" forecolor="#000000" backcolor="#FFFFFF"
					key="textField-13" positionType="Float" />
				<box topBorder="None" topBorderColor="#000000"
					leftBorder="None" leftBorderColor="#000000" rightBorder="None"
					rightBorderColor="#000000" bottomBorder="None"
					bottomBorderColor="#000000" />
				<textElement textAlignment="Justified"
					verticalAlignment="Top" rotation="None" lineSpacing="Single">
					<font fontName="Arial" pdfFontName="Helvetica-Bold"
						size="12" isBold="true" isItalic="false" isUnderline="false"
						isPdfEmbedded="false" pdfEncoding="Cp1252"
						isStrikeThrough="false" />
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[($F{qualityResultDTO}.getRule().getHelpKey() != null && !$F{qualityResultDTO}.getRule().getHelpKey().equals(""))?org.squale.squaleweb.resources.WebMessages.getString($P{REPORT_RESOURCE_BUNDLE}.getLocale(), "qualimetric_element.correction"):""]]></textFieldExpression>
			</textField>
			<!-- ####### Textfield declaration ###### -->
			<textField isStretchWithOverflow="true" pattern=""
				isBlankWhenNull="true" evaluationTime="Now" hyperlinkType="None"
				hyperlinkTarget="Self">
				<reportElement mode="Transparent" x="1" y="133"
					width="534" height="23" forecolor="#000000" backcolor="#FFFFFF"
					key="textField-14" positionType="Float" />
				<box topBorder="None" topBorderColor="#000000"
					leftBorder="None" leftBorderColor="#000000" rightBorder="None"
					rightBorderColor="#000000" bottomBorder="None"
					bottomBorderColor="#000000" />
				<textElement textAlignment="Justified"
					verticalAlignment="Top" rotation="None" lineSpacing="Single">
					<font fontName="Arial" pdfFontName="Helvetica"
						size="10" isBold="false" isItalic="false" isUnderline="false"
						isPdfEmbedded="false" pdfEncoding="Cp1252"
						isStrikeThrough="false" />
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[($F{qualityResultDTO}.getRule().getHelpKey() != null && !$F{qualityResultDTO}.getRule().getHelpKey().equals(""))?JasperReportUtil.formatHTML(WebMessages.getString($P{REPORT_RESOURCE_BUNDLE}.getLocale(), $F{qualityResultDTO}.getRule().getHelpKey() + ".correction")): ""]]></textFieldExpression>
			</textField>
			<!-- ####### Textfield declaration ###### -->
			<textField isStretchWithOverflow="false" pattern=""
				isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"
				hyperlinkTarget="Self">
				<reportElement mode="Transparent" x="0" y="162"
					width="100" height="15" forecolor="#000000" backcolor="#FFFFFF"
					key="textField-15" positionType="Float" />
				<box topBorder="None" topBorderColor="#000000"
					leftBorder="None" leftBorderColor="#000000" rightBorder="None"
					rightBorderColor="#000000" bottomBorder="None"
					bottomBorderColor="#000000" />
				<textElement textAlignment="Justified"
					verticalAlignment="Top" rotation="None" lineSpacing="Single">
					<font fontName="Arial" pdfFontName="Helvetica"
						size="12" isBold="false" isItalic="false" isUnderline="false"
						isPdfEmbedded="false" pdfEncoding="Cp1252"
						isStrikeThrough="false" />
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[org.squale.squaleweb.resources.WebMessages.getString($P{REPORT_RESOURCE_BUNDLE}.getLocale(), "export.pdf.action.plan.effort") + " : "]]></textFieldExpression>
			</textField>
			<!-- ####### Image declaration ###### -->
			<image scaleImage="FillFrame" vAlign="Top" hAlign="Left"
				isUsingCache="false" evaluationTime="Now" hyperlinkType="None"
				hyperlinkTarget="Self">
				<reportElement mode="Opaque" x="64" y="94" width="32"
					height="20" forecolor="#000000" backcolor="#FFFFFF" key="image-2"
					positionType="Float">
					<printWhenExpression><![CDATA[new Boolean(SqualeWebActionUtils.isValidMark(""+$F{qualityResultDTO}.getMeanMark()))]]></printWhenExpression>
				</reportElement>
				<box topBorder="None" topBorderColor="#000000"
					leftBorder="None" leftBorderColor="#000000" rightBorder="None"
					rightBorderColor="#000000" bottomBorder="None"
					bottomBorderColor="#000000" />
				<graphicElement stretchType="NoStretch" pen="None"
					fill="Solid" />
				<imageExpression class="java.lang.String"><![CDATA[JasperReportUtil.generatePicto("" + $F{qualityResultDTO}.getMeanMark())]]></imageExpression>
			</image>
			<!-- ####### Image declaration ###### -->
			<image scaleImage="FillFrame" vAlign="Top" hAlign="Left"
				isUsingCache="false" evaluationTime="Now" hyperlinkType="None"
				hyperlinkTarget="Self">
				<reportElement mode="Opaque" x="100" y="162" width="29"
					height="22" forecolor="#000000" backcolor="#FFFFFF" key="image-3"
					positionType="Float">
					<printWhenExpression><![CDATA[new Boolean($V{nbSquale}.intValue() > 0)]]></printWhenExpression>
				</reportElement>
				<box topBorder="None" topBorderColor="#000000"
					leftBorder="None" leftBorderColor="#000000" rightBorder="None"
					rightBorderColor="#000000" bottomBorder="None"
					bottomBorderColor="#000000" />
				<graphicElement stretchType="NoStretch" pen="None"
					fill="Solid" />
				<imageExpression class="java.lang.String"><![CDATA["/images/pictos/effort.gif"]]></imageExpression>
			</image>
			<!-- ####### Image declaration ###### -->
			<image scaleImage="FillFrame" vAlign="Top" hAlign="Left"
				isUsingCache="false" evaluationTime="Now" hyperlinkType="None"
				hyperlinkTarget="Self">
				<reportElement mode="Opaque" x="130" y="162" width="29"
					height="22" forecolor="#000000" backcolor="#FFFFFF" key="image-4"
					positionType="Float">
					<printWhenExpression><![CDATA[new Boolean($V{nbSquale}.intValue() > 1)]]></printWhenExpression>
				</reportElement>
				<box topBorder="None" topBorderColor="#000000"
					leftBorder="None" leftBorderColor="#000000" rightBorder="None"
					rightBorderColor="#000000" bottomBorder="None"
					bottomBorderColor="#000000" />
				<graphicElement stretchType="NoStretch" pen="None"
					fill="Solid" />
				<imageExpression class="java.lang.String"><![CDATA["/images/pictos/effort.gif"]]></imageExpression>
			</image>
			<!-- ####### Image declaration ###### -->
			<image scaleImage="FillFrame" vAlign="Top" hAlign="Left"
				isUsingCache="false" evaluationTime="Now" hyperlinkType="None"
				hyperlinkTarget="Self">
				<reportElement mode="Opaque" x="160" y="162" width="29"
					height="22" forecolor="#000000" backcolor="#FFFFFF" key="image-5"
					positionType="Float">
					<printWhenExpression><![CDATA[new Boolean($V{nbSquale}.intValue() > 2)]]></printWhenExpression>
				</reportElement>
				<box topBorder="None" topBorderColor="#000000"
					leftBorder="None" leftBorderColor="#000000" rightBorder="None"
					rightBorderColor="#000000" bottomBorder="None"
					bottomBorderColor="#000000" />
				<graphicElement stretchType="NoStretch" pen="None"
					fill="Solid" />
				<imageExpression class="java.lang.String"><![CDATA["/images/pictos/effort.gif"]]></imageExpression>
			</image>
			<!-- ####### Image declaration ###### -->
			<image scaleImage="FillFrame" vAlign="Top" hAlign="Left"
				isUsingCache="false" evaluationTime="Now" hyperlinkType="None"
				hyperlinkTarget="Self">
				<reportElement mode="Opaque" x="190" y="162" width="29"
					height="22" forecolor="#000000" backcolor="#FFFFFF" key="image-6"
					positionType="Float">
					<printWhenExpression><![CDATA[new Boolean($V{nbSquale}.intValue() > 3)]]></printWhenExpression>
				</reportElement>
				<box topBorder="None" topBorderColor="#000000"
					leftBorder="None" leftBorderColor="#000000" rightBorder="None"
					rightBorderColor="#000000" bottomBorder="None"
					bottomBorderColor="#000000" />
				<graphicElement stretchType="NoStretch" pen="None"
					fill="Solid" />
				<imageExpression class="java.lang.String"><![CDATA["/images/pictos/effort.gif"]]></imageExpression>
			</image>
			<!-- ####### Image declaration ###### -->
			<image scaleImage="FillFrame" vAlign="Top" hAlign="Left"
				isUsingCache="false" evaluationTime="Now" hyperlinkType="None"
				hyperlinkTarget="Self">
				<reportElement mode="Opaque" x="220" y="162" width="29"
					height="22" forecolor="#000000" backcolor="#FFFFFF" key="image-7"
					positionType="Float">
					<printWhenExpression><![CDATA[new Boolean($V{nbSquale}.intValue() > 4)]]></printWhenExpression>
				</reportElement>
				<box topBorder="None" topBorderColor="#000000"
					leftBorder="None" leftBorderColor="#000000" rightBorder="None"
					rightBorderColor="#000000" bottomBorder="None"
					bottomBorderColor="#000000" />
				<graphicElement stretchType="NoStretch" pen="None"
					fill="Solid" />
				<imageExpression class="java.lang.String"><![CDATA["/images/pictos/effort.gif"]]></imageExpression>
			</image>
			<!-- ####### TextField declaration ###### -->
			<textField isStretchWithOverflow="true" pattern=""
				isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"
				hyperlinkTarget="Self">
				<reportElement mode="Transparent" x="0" y="186"
					width="534" height="20" forecolor="#000000" backcolor="#FFFFFF"
					key="textField-18" positionType="Float">
					<printWhenExpression><![CDATA[new Boolean($P{volumetry}!=null)]]></printWhenExpression>
				</reportElement>
				<box topBorder="None" topBorderColor="#000000"
					leftBorder="None" leftBorderColor="#000000" rightBorder="None"
					rightBorderColor="#000000" bottomBorder="None"
					bottomBorderColor="#000000" />
				<textElement textAlignment="Justified"
					verticalAlignment="Top" rotation="None" lineSpacing="Single">
					<font fontName="Arial" pdfFontName="Helvetica"
						size="12" isBold="false" isItalic="false" isUnderline="false"
						isPdfEmbedded="false" pdfEncoding="Cp1252"
						isStrikeThrough="false" />
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[(((PracticeRuleDTO)$F{qualityResultDTO}.getRule()).isRuleChecking())?msg($R{export.pdf.detailed.action.plan.total.transgressions}, $F{nbCorrections}.toString()):msg($R{export.pdf.detailed.action.plan.total.components}, $F{nbCorrections}.toString())]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<!-- ######################### ColumnFooter declaration ############################ -->
	<!-- Definition of the column footer section for this report. The column footer is	 -->
	<!-- printed at the bottom of each column on the report. If the report's column count-->
	<!-- is 1, column header and footer sections are ignored.							 -->
	<columnFooter>
		<band height="0" isSplitAllowed="true"></band>
	</columnFooter>
	<!-- ##################### PageFooter declaration ######################### -->
	<!-- Definition of the page footer section for this report. The page footer -->
	<!-- is printed at the bottom of each page on the report. 					-->
	<pageFooter>
		<band height="42" isSplitAllowed="true">
			<rectangle radius="0">
				<reportElement mode="Transparent" x="0" y="0"
					width="536" height="25" forecolor="#000000" backcolor="#FFFFFF"
					key="rectangle-2" />
				<graphicElement stretchType="NoStretch" pen="Thin"
					fill="Solid" />
			</rectangle>
			<!-- ####### TextField declaration ###### -->
			<textField isStretchWithOverflow="false" pattern=""
				isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"
				hyperlinkTarget="Self">
				<reportElement mode="Transparent" x="198" y="5"
					width="181" height="20" forecolor="#000000" backcolor="#FFFFFF"
					key="textField-7" />
				<box topBorder="None" topBorderColor="#000000"
					leftBorder="None" leftBorderColor="#000000" rightBorder="None"
					rightBorderColor="#000000" bottomBorder="None"
					bottomBorderColor="#000000" />
				<textElement textAlignment="Center"
					verticalAlignment="Middle" rotation="None" lineSpacing="Single">
					<font fontName="Arial" pdfFontName="Helvetica"
						size="10" isBold="false" isItalic="false" isUnderline="false"
						isPdfEmbedded="false" pdfEncoding="Cp1252"
						isStrikeThrough="false" />
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{qualityResultDTO}.getProject().getName()]]></textFieldExpression>
			</textField>
			<!-- ####### TextField declaration ###### -->
			<textField isStretchWithOverflow="false" pattern=""
				isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"
				hyperlinkTarget="Self">
				<reportElement mode="Transparent" x="458" y="5"
					width="33" height="18" forecolor="#000000" backcolor="#FFFFFF"
					key="textField" />
				<box topBorder="None" topBorderColor="#000000"
					leftBorder="None" leftBorderColor="#000000" rightBorder="None"
					rightBorderColor="#000000" bottomBorder="None"
					bottomBorderColor="#000000" />
				<textElement textAlignment="Right"
					verticalAlignment="Middle" rotation="None" lineSpacing="Single">
					<font fontName="Arial" pdfFontName="Helvetica"
						size="10" isBold="false" isItalic="false" isUnderline="false"
						isPdfEmbedded="false" pdfEncoding="Cp1252"
						isStrikeThrough="false" />
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$V{PAGE_NUMBER} + " / "]]></textFieldExpression>
			</textField>
			<!-- ####### TextField declaration ###### -->
			<textField isStretchWithOverflow="false" pattern=""
				isBlankWhenNull="false" evaluationTime="Report" hyperlinkType="None"
				hyperlinkTarget="Self">
				<reportElement mode="Transparent" x="491" y="5"
					width="43" height="18" forecolor="#000000" backcolor="#FFFFFF"
					key="textField" />
				<box topBorder="None" topBorderColor="#000000"
					leftBorder="None" leftBorderColor="#000000" rightBorder="None"
					rightBorderColor="#000000" bottomBorder="None"
					bottomBorderColor="#000000" />
				<textElement textAlignment="Justified"
					verticalAlignment="Middle" rotation="None" lineSpacing="Single">
					<font fontName="Arial" pdfFontName="Helvetica"
						size="10" isBold="false" isItalic="false" isUnderline="false"
						isPdfEmbedded="false" pdfEncoding="Cp1252"
						isStrikeThrough="false" />
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["" + $V{PAGE_NUMBER} + ""]]></textFieldExpression>
			</textField>
			<!-- ####### TextField declaration ###### -->
			<textField isStretchWithOverflow="false" pattern=""
				isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"
				hyperlinkTarget="Self">
				<reportElement mode="Transparent" x="1" y="30"
					width="442" height="12" forecolor="#000000" backcolor="#FFFFFF"
					key="textField-8" />
				<box topBorder="None" topBorderColor="#000000"
					leftBorder="None" leftBorderColor="#000000" rightBorder="None"
					rightBorderColor="#000000" bottomBorder="None"
					bottomBorderColor="#000000" />
				<textElement textAlignment="Justified"
					verticalAlignment="Top" rotation="None" lineSpacing="Single">
					<font fontName="Arial" pdfFontName="Helvetica"
						size="8" isBold="false" isItalic="false" isUnderline="false"
						isPdfEmbedded="false" pdfEncoding="Cp1252"
						isStrikeThrough="false" />
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[msg($R{export.pdf.page.footer}, $V{date}, $P{userName})]]></textFieldExpression>
			</textField>
			<!-- ####### TextField declaration ###### -->
			<textField isStretchWithOverflow="false" pattern=""
				isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"
				hyperlinkTarget="Self">
				<reportElement mode="Transparent" x="2" y="5"
					width="189" height="20" forecolor="#000000" backcolor="#FFFFFF"
					key="textField-10">
					<printWhenExpression><![CDATA[new Boolean($P{factors}==null)]]></printWhenExpression>
				</reportElement>
				<box topBorder="None" topBorderColor="#000000"
					leftBorder="None" leftBorderColor="#000000" rightBorder="None"
					rightBorderColor="#000000" bottomBorder="None"
					bottomBorderColor="#000000" />
				<textElement textAlignment="Justified"
					verticalAlignment="Middle" rotation="None" lineSpacing="Single">
					<font fontName="Verdana" pdfFontName="Helvetica"
						size="10" isBold="false" isItalic="false" isUnderline="false"
						isPdfEmbedded="false" pdfEncoding="Cp1252"
						isStrikeThrough="false" />
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[msg($R{description.name.audit}, org.squale.squaleweb.util.SqualeWebActionUtils.getFormattedDate($F{qualityResultDTO}.getAudit().getDate(), $P{REPORT_RESOURCE_BUNDLE}.getLocale()))]]></textFieldExpression>
			</textField>
			<!-- ####### TextField declaration ###### -->
			<textField isStretchWithOverflow="false" pattern=""
				isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"
				hyperlinkTarget="Self">
				<reportElement mode="Transparent" x="0" y="5"
					width="173" height="20" forecolor="#000000" backcolor="#FFFFFF"
					key="textField-20" positionType="Float">
					<printWhenExpression><![CDATA[new Boolean($P{factors}!=null)]]></printWhenExpression>
				</reportElement>
				<box topBorder="None" topBorderColor="#000000"
					leftBorder="None" leftBorderColor="#000000" rightBorder="None"
					rightBorderColor="#000000" bottomBorder="None"
					bottomBorderColor="#000000" />
				<textElement textAlignment="Justified"
					verticalAlignment="Top" rotation="None" lineSpacing="Single">
					<font fontName="Verdana" pdfFontName="Helvetica"
						size="8" isBold="false" isItalic="false" isUnderline="false"
						isPdfEmbedded="false" pdfEncoding="Cp1252"
						isStrikeThrough="false" />
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[msg($R{description.name.audit}, $P{auditDate}) + "\n"
+ msg($R{evolution.components.previous_audit}, $P{previousAuditDate})]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
	<!-- ###################### Summary declaration ################### -->
	<!-- Definition of the summary section for this report. The summary -->
	<!-- section is printed only once at the end of the report. 		-->
	<summary>
		<band height="0" isSplitAllowed="true"></band>
	</summary>
</jasperReport>
